{"version":3,"file":"index.esm.js","sources":["../src/TransactionBatcher.ts","../src/Debouncer.ts","../src/MemoryManager.ts","../src/PerformanceMonitor.ts"],"sourcesContent":[null,null,null,null],"names":["TransactionBatcher","constructor","config","this","batch","batchTimeout","maxBatchSize","maxBatchTime","enabled","add","transaction","push","length","flushBatch","scheduleFlush","flush","clearTimeout","setOnFlush","callback","onFlush","getBatchSize","isEnabled","setEnabled","transactions","state","beforeState","window","setTimeout","destroy","createTransactionBatcher","Debouncer","delay","timeoutId","execute","func","args","cancel","createDebouncer","MemoryManager","cleanupInterval","eventListeners","Map","timeouts","Set","intervals","maxMemoryMB","cleanupIntervalMs","autoCleanup","startAutoCleanup","registerEventListener","element","type","listener","options","key","Math","random","addEventListener","set","registerTimeout","registerInterval","intervalId","unregisterTimeout","delete","unregisterInterval","forceGC","gc","getMemoryUsage","memInfo","performance","memory","used","round","usedJSHeapSize","total","totalJSHeapSize","limit","jsHeapSizeLimit","isMemoryHigh","cleanup","clear","clearInterval","setInterval","stopAutoCleanup","createMemoryManager","PerformanceMonitor","metrics","isMonitoring","sampleInterval","currentOperation","maxSamples","logWarnings","startMonitoring","collectMetrics","stopMonitoring","startOperation","memoryInfo","startTime","now","memoryStart","endOperation","endTime","endMemory","domTime","renderTime","transactionTime","memoryUsage","timestamp","Date","addMetrics","checkPerformanceWarnings","getMetrics","getAverageMetrics","durationMs","cutoff","recentMetrics","filter","m","averages","reduce","acc","metric","clearMetrics","slice","warnings","console","warn","join","createPerformanceMonitor"],"mappings":"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"}