{"version":3,"file":"index.cjs.js","sources":["../src/TransactionBatcher.ts","../src/Debouncer.ts","../src/MemoryManager.ts","../src/PerformanceMonitor.ts"],"sourcesContent":[null,null,null,null],"names":["TransactionBatcher","constructor","config","this","batch","batchTimeout","maxBatchSize","maxBatchTime","enabled","add","transaction","push","length","flushBatch","scheduleFlush","flush","clearTimeout","setOnFlush","callback","onFlush","getBatchSize","isEnabled","setEnabled","transactions","state","beforeState","window","setTimeout","destroy","Debouncer","delay","timeoutId","execute","func","args","cancel","MemoryManager","cleanupInterval","eventListeners","Map","timeouts","Set","intervals","maxMemoryMB","cleanupIntervalMs","autoCleanup","startAutoCleanup","registerEventListener","element","type","listener","options","key","Math","random","addEventListener","set","registerTimeout","registerInterval","intervalId","unregisterTimeout","delete","unregisterInterval","forceGC","gc","getMemoryUsage","memInfo","performance","memory","used","round","usedJSHeapSize","total","totalJSHeapSize","limit","jsHeapSizeLimit","isMemoryHigh","cleanup","clear","clearInterval","setInterval","stopAutoCleanup","PerformanceMonitor","metrics","isMonitoring","sampleInterval","currentOperation","maxSamples","logWarnings","startMonitoring","collectMetrics","stopMonitoring","startOperation","memoryInfo","startTime","now","memoryStart","endOperation","endTime","endMemory","domTime","renderTime","transactionTime","memoryUsage","timestamp","Date","addMetrics","checkPerformanceWarnings","getMetrics","getAverageMetrics","durationMs","cutoff","recentMetrics","filter","m","averages","reduce","acc","metric","clearMetrics","slice","warnings","console","warn","join"],"mappings":"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"}