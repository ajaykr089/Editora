"use strict";var e=require("@rte-editor/core");class o extends e.Plugin{constructor(){super({name:"codeblock",schema:{nodes:{code_block:{content:"text*",marks:"",group:"block",code:!0,defining:!0,attrs:{language:{default:null}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:e=>({language:e.getAttribute("data-language")})}],toDOM:e=>["pre",e.attrs.language?{"data-language":e.attrs.language}:{},["code",0]]}},marks:{code:{parseDOM:[{tag:"code"}],toDOM:()=>["code",0]}}},commands:{toggleCodeBlock:(e,o)=>{const t=e.schema.nodes.code_block,a=e.schema.nodes.paragraph;if(o){const{from:c,to:r}=e.selection,n=e.tr;let l=!1;e.doc.nodesBetween(c,r,e=>{if(e.type===t)return l=!0,!1}),l?n.setBlockType(c,r,a):n.setBlockType(c,r,t),o(n)}return!0},toggleCode:(e,o)=>{const t=e.schema.marks.code,{from:a,to:c}=e.selection;if(o){const r=e.tr;e.doc.rangeHasMark(a,c,t)?r.removeMark(a,c,t):r.addMark(a,c,t.create()),o(r)}return!0}},toolbar:{items:[{id:"code_block",icon:"{ }",label:"Code Block",command:"toggleCodeBlock"},{id:"code",icon:"</>",label:"Inline Code",command:"toggleCode"}]},keybindings:{"Mod-Alt-c":"toggleCodeBlock","Mod-`":"toggleCode"}})}}exports.CodeBlockPlugin=o,exports.createCodeBlockPlugin=function(){return new o};
//# sourceMappingURL=index.cjs.js.map
