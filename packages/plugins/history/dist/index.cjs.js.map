{"version":3,"file":"index.cjs.js","sources":["../src/HistoryPlugin.ts"],"sourcesContent":[null],"names":["HistoryPlugin","Plugin","constructor","options","super","name","commands","undo","undoCommand","redo","redoCommand","clearHistory","clearHistoryCommand","toolbar","items","id","icon","label","command","enabled","state","done","undone","depth","newGroupDelay","length","keybindings","onTransaction","tr","ctx","this","handleTransaction","historyState","historyMeta","getMeta","push","shift","dispatch","history","lastTransaction","setMeta","steps","i","step","invert","inverted","lastUndone"],"mappings":"+CAkBM,MAAOA,UAAsBC,EAAAA,OAGjC,WAAAC,CAAYC,EAAsD,IAChEC,MAAM,CACJC,KAAM,UACNC,SAAU,CACRC,KAAMC,EACNC,KAAMC,EACNC,aAAcC,GAEhBC,QAAS,CACPC,MAAO,CACL,CACEC,GAAI,OACJC,KAAM,IACNC,MAAO,OACPC,QAAS,OACTC,QAAUC,IAqEb,CACLC,KAAM,GACNC,OAAQ,GACRC,MAAO,IACPC,cAAe,KAvEUH,KAAKI,OAAS,IAGjC,CACEV,GAAI,OACJC,KAAM,IACNC,MAAO,OACPC,QAAS,OACTC,QAAUC,IA2Db,CACLC,KAAM,GACNC,OAAQ,GACRC,MAAO,IACPC,cAAe,KA7DUF,OAAOG,OAAS,MAKvCC,YAAa,CACX,QAAS,OACT,QAAS,OACT,cAAe,QAEjBC,cAAe,CAACC,EAAiBC,KAC/BC,KAAKC,kBAAkBH,EAAIC,EAAIT,UAInCU,KAAKE,aAAe,CAClBX,KAAM,GACNC,OAAQ,GACRC,MAAOpB,EAAQoB,OAAS,IACxBC,cAAerB,EAAQqB,eAAiB,IAE5C,CAEQ,iBAAAO,CAAkBH,EAAiBR,GACzC,MAAMa,EAAcL,EAAGM,QAAQ,WAEX,WAAhBD,IAIgB,SAAhBA,EAKgB,SAAhBA,GAMJH,KAAKE,aAAaX,KAAKc,KAAKP,GAC5BE,KAAKE,aAAaV,OAAS,GAGvBQ,KAAKE,aAAaX,KAAKI,OAASK,KAAKE,aAAaT,OACpDO,KAAKE,aAAaX,KAAKe,SAVvBN,KAAKE,aAAaX,KAAKc,KAAKP,GAL5BE,KAAKE,aAAaV,OAAOa,KAAKP,GAiBlC,EAoBF,SAASpB,EAAYY,EAAoBiB,GACvC,MAAMC,EAZC,CACLjB,KAAM,GACNC,OAAQ,GACRC,MAAO,IACPC,cAAe,KAUjB,GAA4B,IAAxBc,EAAQjB,KAAKI,OACf,OAAO,EAGT,GAAIY,EAAU,CACZ,MAAME,EAAkBD,EAAQjB,KAAKiB,EAAQjB,KAAKI,OAAS,GACrDG,EAAKR,EAAMQ,GAAGY,QAAQ,UAAW,QAGvC,GAAID,EAAgBE,MAClB,IAAK,IAAIC,EAAIH,EAAgBE,MAAMhB,OAAS,EAAGiB,GAAK,EAAGA,IAAK,CAC1D,MAAMC,EAAOJ,EAAgBE,MAAMC,GACnC,GAAIC,EAAKC,OAAQ,CACf,MAAMC,EAAWF,EAAKC,OAAOxB,GACzByB,GACFjB,EAAGe,KAAKE,EAEZ,CACF,CAGFR,EAAST,EACX,CAEA,OAAO,CACT,CAKA,SAASlB,EAAYU,EAAoBiB,GACvC,MAAMC,EA7CC,CACLjB,KAAM,GACNC,OAAQ,GACRC,MAAO,IACPC,cAAe,KA2CjB,GAA8B,IAA1Bc,EAAQhB,OAAOG,OACjB,OAAO,EAGT,GAAIY,EAAU,CACZ,MAAMS,EAAaR,EAAQhB,OAAOgB,EAAQhB,OAAOG,OAAS,GACpDG,EAAKR,EAAMQ,GAAGY,QAAQ,UAAW,QAGvC,GAAIM,EAAWL,MACb,IAAK,MAAME,KAAQG,EAAWL,MAC5Bb,EAAGe,KAAKA,GAIZN,EAAST,EACX,CAEA,OAAO,CACT,CAKA,SAAShB,EAAoBQ,EAAoBiB,GAC/C,GAAIA,EAAU,CAEZA,EADWjB,EAAMQ,GAAGY,QAAQ,UAAW,SAEzC,CACA,OAAO,CACT,qDAKM,SAA8BrC,GAClC,OAAO,IAAIH,EAAcG,EAC3B"}