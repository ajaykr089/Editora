import e,{createContext as t,useContext as r,useRef as n,useEffect as o,useCallback as a,useState as s,useMemo as l}from"react";import{Editor as c}from"@rte-editor/core";var i,u={exports:{}},d={};var f,p={};
/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */"production"===process.env.NODE_ENV?u.exports=function(){if(i)return d;i=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(t,r,n){var o=null;if(void 0!==n&&(o=""+n),void 0!==r.key&&(o=""+r.key),"key"in r)for(var a in n={},r)"key"!==a&&(n[a]=r[a]);else n=r;return r=n.ref,{$$typeof:e,type:t,key:o,ref:void 0!==r?r:null,props:n}}return d.Fragment=t,d.jsx=r,d.jsxs=r,d}():u.exports=(f||(f=1,"production"!==process.env.NODE_ENV&&function(){function t(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===C?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case b:return"Fragment";case g:return"Profiler";case y:return"StrictMode";case k:return"Suspense";case w:return"SuspenseList";case _:return"Activity"}if("object"==typeof e)switch("number"==typeof e.tag&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),e.$$typeof){case m:return"Portal";case h:return e.displayName||"Context";case v:return(e._context.displayName||"Context")+".Consumer";case x:var r=e.render;return(e=e.displayName)||(e=""!==(e=r.displayName||r.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case S:return null!==(r=e.displayName||null)?r:t(e.type)||"Memo";case j:r=e._payload,e=e._init;try{return t(e(r))}catch(e){}}return null}function r(e){return""+e}function n(e){try{r(e);var t=!1}catch(e){t=!0}if(t){var n=(t=console).error,o="function"==typeof Symbol&&Symbol.toStringTag&&e[Symbol.toStringTag]||e.constructor.name||"Object";return n.call(t,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",o),r(e)}}function o(e){if(e===b)return"<>";if("object"==typeof e&&null!==e&&e.$$typeof===j)return"<...>";try{var r=t(e);return r?"<"+r+">":"<...>"}catch(e){return"<...>"}}function a(){return Error("react-stack-top-frame")}function s(){var e=t(this.type);return D[e]||(D[e]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),void 0!==(e=this.props.ref)?e:null}function l(e,r,o,a,l,i){var d,p=r.children;if(void 0!==p)if(a)if(O(p)){for(a=0;a<p.length;a++)c(p[a]);Object.freeze&&Object.freeze(p)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else c(p);if(T.call(r,"key")){p=t(e);var m=Object.keys(r).filter(function(e){return"key"!==e});a=0<m.length?"{key: someKey, "+m.join(": ..., ")+": ...}":"{key: someKey}",P[p+a]||(m=0<m.length?"{"+m.join(": ..., ")+": ...}":"{}",console.error('A props object containing a "key" prop is being spread into JSX:\n  let props = %s;\n  <%s {...props} />\nReact keys must be passed directly to JSX without using spread:\n  let props = %s;\n  <%s key={someKey} {...props} />',a,p,m,p),P[p+a]=!0)}if(p=null,void 0!==o&&(n(o),p=""+o),function(e){if(T.call(e,"key")){var t=Object.getOwnPropertyDescriptor(e,"key").get;if(t&&t.isReactWarning)return!1}return void 0!==e.key}(r)&&(n(r.key),p=""+r.key),"key"in r)for(var b in o={},r)"key"!==b&&(o[b]=r[b]);else o=r;return p&&function(e,t){function r(){u||(u=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",t))}r.isReactWarning=!0,Object.defineProperty(e,"key",{get:r,configurable:!0})}(o,"function"==typeof e?e.displayName||e.name||"Unknown":e),function(e,t,r,n,o,a){var l=r.ref;return e={$$typeof:f,type:e,key:t,props:r,_owner:n},null!==(void 0!==l?l:null)?Object.defineProperty(e,"ref",{enumerable:!1,get:s}):Object.defineProperty(e,"ref",{enumerable:!1,value:null}),e._store={},Object.defineProperty(e._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(e,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(e,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:o}),Object.defineProperty(e,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:a}),Object.freeze&&(Object.freeze(e.props),Object.freeze(e)),e}(e,p,o,null===(d=N.A)?null:d.getOwner(),l,i)}function c(e){i(e)?e._store&&(e._store.validated=1):"object"==typeof e&&null!==e&&e.$$typeof===j&&("fulfilled"===e._payload.status?i(e._payload.value)&&e._payload.value._store&&(e._payload.value._store.validated=1):e._store&&(e._store.validated=1))}function i(e){return"object"==typeof e&&null!==e&&e.$$typeof===f}var u,d=e,f=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),v=Symbol.for("react.consumer"),h=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),w=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),C=Symbol.for("react.client.reference"),N=d.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,T=Object.prototype.hasOwnProperty,O=Array.isArray,R=console.createTask?console.createTask:function(){return null},D={},E=(d={react_stack_bottom_frame:function(e){return e()}}).react_stack_bottom_frame.bind(d,a)(),$=R(o(a)),P={};p.Fragment=b,p.jsx=function(e,t,r){var n=1e4>N.recentlyCreatedOwnerStacks++;return l(e,t,r,!1,n?Error("react-stack-top-frame"):E,n?R(o(e)):$)},p.jsxs=function(e,t,r){var n=1e4>N.recentlyCreatedOwnerStacks++;return l(e,t,r,!0,n?Error("react-stack-top-frame"):E,n?R(o(e)):$)}}()),p);var m=u.exports;const b=t(null),y=()=>{const e=r(b);if(!e)throw new Error("useEditorContext must be used within an EditorProvider");return e},g=({state:e,dispatch:t,plugins:r=[],editor:n,view:o,children:a})=>{const s={state:e,dispatch:t,plugins:r,editor:n,view:o};return m.jsx(b.Provider,{value:s,children:a})},v=({className:e,items:t})=>{const{state:r,editor:n}=y(),o=t||n.state.plugins.flatMap(e=>{const t=e.getToolbarConfig();return t?.items||[]});if(0===o.length)return m.jsxs("div",{className:`rte-toolbar ${e||""}`,children:[m.jsx("button",{className:"rte-toolbar-button",onMouseDown:e=>{e.preventDefault(),n.executeCommand("toggleBold")},title:"Bold",children:m.jsx("strong",{children:"B"})}),m.jsx("button",{className:"rte-toolbar-button",onMouseDown:e=>{e.preventDefault(),n.executeCommand("toggleItalic")},title:"Italic",children:m.jsx("em",{children:"I"})}),m.jsx("button",{className:"rte-toolbar-button",onMouseDown:e=>{e.preventDefault(),n.executeCommand("undo")},title:"Undo",children:"â†¶"})]});const a=e=>{n.executeCommand(e)};return m.jsx("div",{className:`rte-toolbar ${e||""}`,children:o.map(e=>m.jsx(h,{item:e,state:r,onCommand:a},e.id))})},h=({item:e,state:t,onCommand:r})=>{const n=!!e.active&&e.active(t),o=!e.enabled||e.enabled(t);return m.jsxs("button",{type:"button",className:`rte-toolbar-button ${n?"rte-toolbar-button--active":""} ${o?"":"rte-toolbar-button--disabled"}`,onMouseDown:t=>{t.preventDefault(),o&&r(e.command)},disabled:!o,title:e.label,"aria-label":e.label,children:["string"==typeof e.icon?m.jsx("span",{className:"rte-toolbar-button__icon",children:e.icon}):e.icon,e.label&&m.jsx("span",{className:"rte-toolbar-button__label",children:e.label})]})};class x{constructor(e){this.savedRange=null,this.element=null,this.element=e}save(){const e=window.getSelection();e&&e.rangeCount>0&&this.element?.contains(e.anchorNode)&&(this.savedRange=e.getRangeAt(0).cloneRange())}restore(){if(this.savedRange&&this.element)try{const e=window.getSelection();e&&(e.removeAllRanges(),e.addRange(this.savedRange),this.element.focus())}catch(e){this.element.focus()}}preserveSelection(e){this.save();const t=e();return setTimeout(()=>this.restore(),0),t}getCursorOffset(){const e=window.getSelection();if(!e||0===e.rangeCount||!this.element)return 0;const t=e.getRangeAt(0),r=t.cloneRange();return r.selectNodeContents(this.element),r.setEnd(t.endContainer,t.endOffset),r.toString().length}setCursorOffset(e){if(!this.element)return;const t=document.createTreeWalker(this.element,NodeFilter.SHOW_TEXT,null);let r,n=0;for(;r=t.nextNode();){const t=r.textContent?.length||0;if(n+t>=e){const t=document.createRange();t.setStart(r,e-n),t.collapse(!0);const o=window.getSelection();return void(o&&(o.removeAllRanges(),o.addRange(t)))}n+=t}const o=document.createRange();o.selectNodeContents(this.element),o.collapse(!1);const a=window.getSelection();a&&(a.removeAllRanges(),a.addRange(o))}}const k=({className:e,placeholder:t,readOnly:r=!1,autoFocus:s=!1,spellCheck:l=!0})=>{const{state:c,editor:i}=y(),u=n(null),d=n(new x),f=n(!1),p=n("");o(()=>{u.current&&i&&(i.setView({dom:u.current,focus:()=>{u.current?.focus(),i.focus()},blur:()=>{u.current?.blur(),i.blur()},updateState:e=>{}}),s&&setTimeout(()=>u.current?.focus(),0))},[i,s]);const b=a(()=>{if(r||f.current||!u.current)return;const e=u.current.innerHTML;e!==p.current&&(p.current=e,setTimeout(()=>{f.current||i.setContent(e)},10))},[r,i]),g=a(()=>{f.current=!0},[]),v=a(()=>{f.current=!1,b()},[b]),h=a(e=>{if(r)return;e.preventDefault();const t=e.clipboardData,n=t.getData("text/html"),o=t.getData("text/plain"),a=n||o;a&&(d.current.saveSelection(),i.insertContent(a),setTimeout(()=>{d.current.restoreSelection()},0))},[r,i]),k=a(e=>{if(r)return;e.preventDefault();const t=e.dataTransfer.getData("text/html")||e.dataTransfer.getData("text/plain");t&&i.insertContent(t)},[r,i]),w=a(e=>{r||e.preventDefault()},[r]),S=a(e=>{if(r)return;const t=e.key,n=e.ctrlKey||e.metaKey,o=e.shiftKey;if(e.altKey,n){let r="";switch(t.toLowerCase()){case"b":r="toggleBold";break;case"i":r="toggleItalic";break;case"u":r="toggleUnderline";break;case"z":r=o?"redo":"undo";break;case"y":r="redo";break;case"a":case"c":case"x":case"v":return}r&&(e.preventDefault(),d.current.saveSelection(),i.executeCommand(r),setTimeout(()=>{d.current.restoreSelection()},0))}switch(t){case"Enter":n&&(e.preventDefault(),i.executeCommand("insertHardBreak"));break;case"Tab":e.preventDefault(),o?i.executeCommand("liftListItem"):i.executeCommand("sinkListItem");break;case"Backspace":case"Delete":d.current.saveSelection(),setTimeout(()=>{b()},0)}},[r,i]),j=a(()=>{r||i.focus()},[r,i]),_=a(()=>{if(!r&&u.current){const e=u.current.innerHTML;e!==p.current&&i.setContent(e),i.blur()}},[r,i]);return o(()=>{if(u.current&&i&&!f.current){const e=i.getHTML();u.current.innerHTML!==e&&e!==p.current&&(f.current=!0,d.current.saveSelection(),u.current.innerHTML=e,p.current=e,setTimeout(()=>{d.current.restoreSelection(),f.current=!1},0))}},[c.version,i]),m.jsx("div",{ref:u,className:`rte-content ${e||""}`,contentEditable:!r,suppressContentEditableWarning:!0,spellCheck:l,onInput:b,onCompositionStart:g,onCompositionEnd:v,onPaste:h,onDrop:k,onDragOver:w,onKeyDown:S,onFocus:j,onBlur:_,"data-placeholder":t,role:"textbox","aria-multiline":"true","aria-label":"Rich text editor",style:{minHeight:"200px",padding:"16px",outline:"none",lineHeight:"1.6",wordWrap:"break-word",overflowWrap:"break-word"}})},w=({value:e,onChange:t,plugins:r=[],theme:a="light",readOnly:l=!1,placeholder:i,className:u,showToolbar:d=!0,...f})=>{const[p,b]=s(null);o(()=>{const n=new c({content:e||"",plugins:r,onUpdate:({editor:e})=>{t?.(e.getHTML())}});return b(n),()=>{n.destroy()}},[]),o(()=>{p&&void 0!==e&&e!==p.getHTML()&&p.setContent(e)},[e,p]);const y=n(null),h=["rte-editor",`rte-theme-${a}`,l&&"rte-readonly",u].filter(Boolean).join(" ");return p?m.jsx(g,{state:p.state,dispatch:e=>p.dispatch(e),plugins:r,editor:p,children:m.jsxs("div",{ref:y,className:h,...f,children:[d&&m.jsx(v,{className:"rte-toolbar"}),m.jsx(k,{className:"rte-content",placeholder:i,readOnly:l})]})}):m.jsx("div",{className:"rte-loading",children:"Loading editor..."})},S=()=>{const{state:e}=r(b);return e},j=()=>{const{dispatch:e}=r(b);return e},_=()=>{const{state:e}=r(b);return e.selection},C=()=>!1,N=()=>{const{state:e}=r(b);return e.schema},T=()=>{const{plugins:e}=r(b);return e},O=e=>{const{state:t}=r(b);return l(()=>{for(const r of t.plugins){const n=r.getCommands();if(n[e])try{return!1!==n[e](t,void 0)}catch{return!1}}return!1},[t,e])},R=e=>{const{state:t,dispatch:n}=r(b);return l(()=>()=>{for(const r of t.plugins){const o=r.getCommands();if(o[e]){o[e](t,n);break}}},[t,n,e])},D=()=>{const{view:e}=r(b);return e};export{k as EditorContent,g as EditorProvider,w as RichTextEditor,v as Toolbar,h as ToolbarButton,w as default,R as useCommand,O as useCommandEnabled,j as useDispatch,S as useEditor,y as useEditorContext,C as useFocused,T as usePlugins,N as useSchema,_ as useSelection,D as useView};
//# sourceMappingURL=index.esm.js.map
