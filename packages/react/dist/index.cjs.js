"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("react"),r=require("@rte-editor/core"),n={exports:{}},o={};var a,s={};
/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */"production"===process.env.NODE_ENV?n.exports=function(){if(e)return o;e=1;var t=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function n(e,r,n){var o=null;if(void 0!==n&&(o=""+n),void 0!==r.key&&(o=""+r.key),"key"in r)for(var a in n={},r)"key"!==a&&(n[a]=r[a]);else n=r;return r=n.ref,{$$typeof:t,type:e,key:o,ref:void 0!==r?r:null,props:n}}return o.Fragment=r,o.jsx=n,o.jsxs=n,o}():n.exports=(a||(a=1,"production"!==process.env.NODE_ENV&&function(){function e(t){if(null==t)return null;if("function"==typeof t)return t.$$typeof===_?null:t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case b:return"Fragment";case g:return"Profiler";case y:return"StrictMode";case k:return"Suspense";case C:return"SuspenseList";case j:return"Activity"}if("object"==typeof t)switch("number"==typeof t.tag&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),t.$$typeof){case m:return"Portal";case h:return t.displayName||"Context";case v:return(t._context.displayName||"Context")+".Consumer";case x:var r=t.render;return(t=t.displayName)||(t=""!==(t=r.displayName||r.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case w:return null!==(r=t.displayName||null)?r:e(t.type)||"Memo";case S:r=t._payload,t=t._init;try{return e(t(r))}catch(e){}}return null}function r(e){return""+e}function n(e){try{r(e);var t=!1}catch(e){t=!0}if(t){var n=(t=console).error,o="function"==typeof Symbol&&Symbol.toStringTag&&e[Symbol.toStringTag]||e.constructor.name||"Object";return n.call(t,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",o),r(e)}}function o(t){if(t===b)return"<>";if("object"==typeof t&&null!==t&&t.$$typeof===S)return"<...>";try{var r=e(t);return r?"<"+r+">":"<...>"}catch(e){return"<...>"}}function a(){return Error("react-stack-top-frame")}function l(){var t=e(this.type);return E[t]||(E[t]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),void 0!==(t=this.props.ref)?t:null}function c(t,r,o,a,s,c){var u,f=r.children;if(void 0!==f)if(a)if(R(f)){for(a=0;a<f.length;a++)i(f[a]);Object.freeze&&Object.freeze(f)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else i(f);if(T.call(r,"key")){f=e(t);var m=Object.keys(r).filter(function(e){return"key"!==e});a=0<m.length?"{key: someKey, "+m.join(": ..., ")+": ...}":"{key: someKey}",P[f+a]||(m=0<m.length?"{"+m.join(": ..., ")+": ...}":"{}",console.error('A props object containing a "key" prop is being spread into JSX:\n  let props = %s;\n  <%s {...props} />\nReact keys must be passed directly to JSX without using spread:\n  let props = %s;\n  <%s key={someKey} {...props} />',a,f,m,f),P[f+a]=!0)}if(f=null,void 0!==o&&(n(o),f=""+o),function(e){if(T.call(e,"key")){var t=Object.getOwnPropertyDescriptor(e,"key").get;if(t&&t.isReactWarning)return!1}return void 0!==e.key}(r)&&(n(r.key),f=""+r.key),"key"in r)for(var b in o={},r)"key"!==b&&(o[b]=r[b]);else o=r;return f&&function(e,t){function r(){d||(d=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",t))}r.isReactWarning=!0,Object.defineProperty(e,"key",{get:r,configurable:!0})}(o,"function"==typeof t?t.displayName||t.name||"Unknown":t),function(e,t,r,n,o,a){var s=r.ref;return e={$$typeof:p,type:e,key:t,props:r,_owner:n},null!==(void 0!==s?s:null)?Object.defineProperty(e,"ref",{enumerable:!1,get:l}):Object.defineProperty(e,"ref",{enumerable:!1,value:null}),e._store={},Object.defineProperty(e._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(e,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(e,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:o}),Object.defineProperty(e,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:a}),Object.freeze&&(Object.freeze(e.props),Object.freeze(e)),e}(t,f,o,null===(u=N.A)?null:u.getOwner(),s,c)}function i(e){u(e)?e._store&&(e._store.validated=1):"object"==typeof e&&null!==e&&e.$$typeof===S&&("fulfilled"===e._payload.status?u(e._payload.value)&&e._payload.value._store&&(e._payload.value._store.validated=1):e._store&&(e._store.validated=1))}function u(e){return"object"==typeof e&&null!==e&&e.$$typeof===p}var d,f=t,p=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),v=Symbol.for("react.consumer"),h=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),_=Symbol.for("react.client.reference"),N=f.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,T=Object.prototype.hasOwnProperty,R=Array.isArray,O=console.createTask?console.createTask:function(){return null},E={},D=(f={react_stack_bottom_frame:function(e){return e()}}).react_stack_bottom_frame.bind(f,a)(),$=O(o(a)),P={};s.Fragment=b,s.jsx=function(e,t,r){var n=1e4>N.recentlyCreatedOwnerStacks++;return c(e,t,r,!1,n?Error("react-stack-top-frame"):D,n?O(o(e)):$)},s.jsxs=function(e,t,r){var n=1e4>N.recentlyCreatedOwnerStacks++;return c(e,t,r,!0,n?Error("react-stack-top-frame"):D,n?O(o(e)):$)}}()),s);var l=n.exports;const c=t.createContext(null),i=()=>{const e=t.useContext(c);if(!e)throw new Error("useEditorContext must be used within an EditorProvider");return e},u=({state:e,dispatch:t,plugins:r=[],editor:n,view:o,children:a})=>{const s={state:e,dispatch:t,plugins:r,editor:n,view:o};return l.jsx(c.Provider,{value:s,children:a})},d=({className:e,items:t})=>{const{state:r,editor:n}=i(),o=t||n.state.plugins.flatMap(e=>{const t=e.getToolbarConfig();return t?.items||[]});if(0===o.length)return l.jsxs("div",{className:`rte-toolbar ${e||""}`,children:[l.jsx("button",{className:"rte-toolbar-button",onMouseDown:e=>{e.preventDefault(),n.executeCommand("toggleBold")},title:"Bold",children:l.jsx("strong",{children:"B"})}),l.jsx("button",{className:"rte-toolbar-button",onMouseDown:e=>{e.preventDefault(),n.executeCommand("toggleItalic")},title:"Italic",children:l.jsx("em",{children:"I"})}),l.jsx("button",{className:"rte-toolbar-button",onMouseDown:e=>{e.preventDefault(),n.executeCommand("undo")},title:"Undo",children:"â†¶"})]});const a=e=>{n.executeCommand(e)};return l.jsx("div",{className:`rte-toolbar ${e||""}`,children:o.map(e=>l.jsx(f,{item:e,state:r,onCommand:a},e.id))})},f=({item:e,state:t,onCommand:r})=>{const n=!!e.active&&e.active(t),o=!e.enabled||e.enabled(t);return l.jsxs("button",{type:"button",className:`rte-toolbar-button ${n?"rte-toolbar-button--active":""} ${o?"":"rte-toolbar-button--disabled"}`,onMouseDown:t=>{t.preventDefault(),o&&r(e.command)},disabled:!o,title:e.label,"aria-label":e.label,children:["string"==typeof e.icon?l.jsx("span",{className:"rte-toolbar-button__icon",children:e.icon}):e.icon,e.label&&l.jsx("span",{className:"rte-toolbar-button__label",children:e.label})]})};class p{constructor(e){this.savedRange=null,this.element=null,this.element=e}save(){const e=window.getSelection();e&&e.rangeCount>0&&this.element?.contains(e.anchorNode)&&(this.savedRange=e.getRangeAt(0).cloneRange())}restore(){if(this.savedRange&&this.element)try{const e=window.getSelection();e&&(e.removeAllRanges(),e.addRange(this.savedRange),this.element.focus())}catch(e){this.element.focus()}}preserveSelection(e){this.save();const t=e();return setTimeout(()=>this.restore(),0),t}getCursorOffset(){const e=window.getSelection();if(!e||0===e.rangeCount||!this.element)return 0;const t=e.getRangeAt(0),r=t.cloneRange();return r.selectNodeContents(this.element),r.setEnd(t.endContainer,t.endOffset),r.toString().length}setCursorOffset(e){if(!this.element)return;const t=document.createTreeWalker(this.element,NodeFilter.SHOW_TEXT,null);let r,n=0;for(;r=t.nextNode();){const t=r.textContent?.length||0;if(n+t>=e){const t=document.createRange();t.setStart(r,e-n),t.collapse(!0);const o=window.getSelection();return void(o&&(o.removeAllRanges(),o.addRange(t)))}n+=t}const o=document.createRange();o.selectNodeContents(this.element),o.collapse(!1);const a=window.getSelection();a&&(a.removeAllRanges(),a.addRange(o))}}const m=({className:e,placeholder:r,readOnly:n=!1,autoFocus:o=!1,spellCheck:a=!0})=>{const{state:s,editor:c}=i(),u=t.useRef(null),d=t.useRef(new p),f=t.useRef(!1),m=t.useRef("");t.useEffect(()=>{u.current&&c&&(c.setView({dom:u.current,focus:()=>{u.current?.focus(),c.focus()},blur:()=>{u.current?.blur(),c.blur()},updateState:e=>{}}),o&&setTimeout(()=>u.current?.focus(),0))},[c,o]);const b=t.useCallback(()=>{if(n||f.current||!u.current)return;const e=u.current.innerHTML;e!==m.current&&(m.current=e,setTimeout(()=>{f.current||c.setContent(e)},10))},[n,c]),y=t.useCallback(()=>{f.current=!0},[]),g=t.useCallback(()=>{f.current=!1,b()},[b]),v=t.useCallback(e=>{if(n)return;e.preventDefault();const t=e.clipboardData,r=t.getData("text/html"),o=t.getData("text/plain"),a=r||o;a&&(d.current.saveSelection(),c.insertContent(a),setTimeout(()=>{d.current.restoreSelection()},0))},[n,c]),h=t.useCallback(e=>{if(n)return;e.preventDefault();const t=e.dataTransfer.getData("text/html")||e.dataTransfer.getData("text/plain");t&&c.insertContent(t)},[n,c]),x=t.useCallback(e=>{n||e.preventDefault()},[n]),k=t.useCallback(e=>{if(n)return;const t=e.key,r=e.ctrlKey||e.metaKey,o=e.shiftKey;if(e.altKey,r){let r="";switch(t.toLowerCase()){case"b":r="toggleBold";break;case"i":r="toggleItalic";break;case"u":r="toggleUnderline";break;case"z":r=o?"redo":"undo";break;case"y":r="redo";break;case"a":case"c":case"x":case"v":return}r&&(e.preventDefault(),d.current.saveSelection(),c.executeCommand(r),setTimeout(()=>{d.current.restoreSelection()},0))}switch(t){case"Enter":r&&(e.preventDefault(),c.executeCommand("insertHardBreak"));break;case"Tab":e.preventDefault(),o?c.executeCommand("liftListItem"):c.executeCommand("sinkListItem");break;case"Backspace":case"Delete":d.current.saveSelection(),setTimeout(()=>{b()},0)}},[n,c]),C=t.useCallback(()=>{n||c.focus()},[n,c]),w=t.useCallback(()=>{if(!n&&u.current){const e=u.current.innerHTML;e!==m.current&&c.setContent(e),c.blur()}},[n,c]);return t.useEffect(()=>{if(u.current&&c&&!f.current){const e=c.getHTML();u.current.innerHTML!==e&&e!==m.current&&(f.current=!0,d.current.saveSelection(),u.current.innerHTML=e,m.current=e,setTimeout(()=>{d.current.restoreSelection(),f.current=!1},0))}},[s.version,c]),l.jsx("div",{ref:u,className:`rte-content ${e||""}`,contentEditable:!n,suppressContentEditableWarning:!0,spellCheck:a,onInput:b,onCompositionStart:y,onCompositionEnd:g,onPaste:v,onDrop:h,onDragOver:x,onKeyDown:k,onFocus:C,onBlur:w,"data-placeholder":r,role:"textbox","aria-multiline":"true","aria-label":"Rich text editor",style:{minHeight:"200px",padding:"16px",outline:"none",lineHeight:"1.6",wordWrap:"break-word",overflowWrap:"break-word"}})},b=({value:e,onChange:n,plugins:o=[],theme:a="light",readOnly:s=!1,placeholder:c,className:i,showToolbar:f=!0,...p})=>{const[b,y]=t.useState(null);t.useEffect(()=>{const t=new r.Editor({content:e||"",plugins:o,onUpdate:({editor:e})=>{n?.(e.getHTML())}});return y(t),()=>{t.destroy()}},[]),t.useEffect(()=>{b&&void 0!==e&&e!==b.getHTML()&&b.setContent(e)},[e,b]);const g=t.useRef(null),v=["rte-editor",`rte-theme-${a}`,s&&"rte-readonly",i].filter(Boolean).join(" ");return b?l.jsx(u,{state:b.state,dispatch:e=>b.dispatch(e),plugins:o,editor:b,children:l.jsxs("div",{ref:g,className:v,...p,children:[f&&l.jsx(d,{className:"rte-toolbar"}),l.jsx(m,{className:"rte-content",placeholder:c,readOnly:s})]})}):l.jsx("div",{className:"rte-loading",children:"Loading editor..."})};exports.EditorContent=m,exports.EditorProvider=u,exports.RichTextEditor=b,exports.Toolbar=d,exports.ToolbarButton=f,exports.default=b,exports.useCommand=e=>{const{state:r,dispatch:n}=t.useContext(c);return t.useMemo(()=>()=>{for(const t of r.plugins){const o=t.getCommands();if(o[e]){o[e](r,n);break}}},[r,n,e])},exports.useCommandEnabled=e=>{const{state:r}=t.useContext(c);return t.useMemo(()=>{for(const t of r.plugins){const n=t.getCommands();if(n[e])try{return!1!==n[e](r,void 0)}catch{return!1}}return!1},[r,e])},exports.useDispatch=()=>{const{dispatch:e}=t.useContext(c);return e},exports.useEditor=()=>{const{state:e}=t.useContext(c);return e},exports.useEditorContext=i,exports.useFocused=()=>!1,exports.usePlugins=()=>{const{plugins:e}=t.useContext(c);return e},exports.useSchema=()=>{const{state:e}=t.useContext(c);return e.schema},exports.useSelection=()=>{const{state:e}=t.useContext(c);return e.selection},exports.useView=()=>{const{view:e}=t.useContext(c);return e};
//# sourceMappingURL=index.cjs.js.map
